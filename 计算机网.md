### 计算机网

##### 一.  HTTP和HTTPS的区别

1. http是超文本传输协议（Hyper Text Transfer Protocol），信息是明文传输的，可以通过抓包直接获取传输的相关数据和信息；https对传输的数据进行了加密，是具有安全性的SSL（Secure Sockets Layer）加密传输协议；
   * 在https数据传输的过程中，需要用SSL/TLS对数据进行加密和解密，用http对加密后的数据进行传输，也就是说https协议是由ssl+http协议构建的可进行加密传输，身份认证的网络协议；
   * https的数据是被对称加密的，对称加密的密钥通过非对称加密进行传输；
2. http和https使用的是完全不同的连接方式，用的端口也不一样，http使用80端口，http是使用443端口；
   * https的连接方式中多了ssl层？
3. http的连接是无状态的，https协议是由ssl+http协议构建的可进行加密传输、身份认证的网络协议，比http协议安全；
   * 无状态连接：http协议不对请求和响应之间的通信状态进行保存；（每一次请求都是独立的）；可以用cookie和session来解决无状态的问题；
   * 长连接：只要任意一端没有提出断开连接，就保持TCP连接状态，避免反复连接断开的开销；
4. https协议需要到ca申请证书，一般免费证书较少，需要一定的费用；

##### 二. 对称加密和非对称加密

1. 对称加密（私钥加密），信息的发送方和接收方使用的同一个密钥去加密和解密数据；

   * 加密过程：明文+加密算法+私钥 => 密文；解密过程：密文+解密算法+私钥 = > 明文

   * 特点：算法公开、计算量小、加密和解密速度快（比如各种移位、异或操作，DES、3DES算法等），适合对大数据量进行加密；
   * 缺点：加密和解密用的同一个密钥，加密解密算法是公开的，密钥如果被窃取，密文就很容易被破解；

2. 非对称加密（公钥加密），非对称加密使用一对密钥：公钥和私钥，其中私钥由自己保存，不对外泄露，公钥为所有人都可以获得的密钥，如果用公钥对数据进行加密，只有用对应的私钥才能解密；

   * 加密过程：明文+加密算法+公钥 = > 密文；解密过程：密文+加密算法+私钥 = > 明文；（用公钥加密的密文只能用对应的私钥解密，反之，用私钥加密的密文只能用公钥解密）
   * 特点：安全性高
   * 缺点：加解密时间长、速度慢

3. https连接中的公钥和私钥（一次https请求实际上包含了两次http传输）

   ![avatar](.\pics\https请求.webp)

   * 第一步：客户端向服务端发起请求，连接到服务的的443接口；（开始SSL通信）
   * 第二步：服务端生成一对密钥：密钥保存在服务端，私钥可以发送给任何人；
   * 第三步：服务端将生成的公钥返回给客户端；
   * 第四步：客户端收到响应后，对服务端的证书合法性进行校验，如果合肥，客户端生成随机值作为密钥，用于对称加密（客户端密钥）；然后用服务端返回的私钥对客户端密钥进行非对称加密；
   * 第五步：客户端发起请求，将进行非对称加密之后的客户端密钥发送给服务端；
   * 第六步：服务端用私钥对客户端密钥进行非对称解密，然后用客户端密钥对要传输的数据进行对称加密；
   * 第七步：服务端将密文返回给客户端；
   * 第八步：客户端用客户端密钥对响应报文中的数据进行解密；

4. 